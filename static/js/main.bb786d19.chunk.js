(this.webpackJsonpmuesli=this.webpackJsonpmuesli||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(31),a=n.n(c),u=(n(102),n(78)),i=n(161),l=n(155),s=(n(103),n(63)),d=n.n(s),j=n(16),b=n(12),f=n(73),h=n(163),p=n(157),v=n(156),O=n(164),g=n(160),x=n(159),y=n(64),m=n(162),k=n(2);var A=function(e){return Object(k.jsx)(m.a,Object(y.a)(Object(y.a)({color:e.enabled?"error":"success"},e),{},{children:e.enabled?e.disableText||"Disable":e.enableText||"Enable"}))},C=n(76),P=n.n(C),w=n(26);var S=function(e){var t=Object(w.a)(),n=Object(r.useRef)(),o=Object(r.useRef)();function c(){var e;null===(e=o.current)||void 0===e||e.play()}return Object(r.useEffect)((function(){return o.current=P.a.create({container:n.current,responsive:!0}),function(){o.current.destroy(),o.current=null}}),[]),Object(r.useEffect)((function(){var e,n;null===(e=o.current)||void 0===e||e.setWaveColor(t.palette.primary.dark),null===(n=o.current)||void 0===n||n.setProgressColor(t.palette.secondary.dark)}),[t.palette.primary.dark,t.palette.secondary.dark]),Object(r.useEffect)((function(){var t,n;e.autoplay?null===(t=o.current)||void 0===t||t.on("ready",c):null===(n=o.current)||void 0===n||n.un("ready")}),[e.autoplay]),Object(r.useEffect)((function(){var t,n;e.audioPath?null===(t=o.current)||void 0===t||t.load(e.audioPath):null===(n=o.current)||void 0===n||n.empty()}),[e.audioPath]),Object(r.useEffect)((function(){var t,n;e.loop?null===(t=o.current)||void 0===t||t.on("finish",c):null===(n=o.current)||void 0===n||n.un("finish")}),[e.loop]),Object(k.jsxs)(h.a,{children:[Object(k.jsx)("h2",{children:"AudioDisplay WIP"}),Object(k.jsxs)("p",{children:["Audio Path: ",e.audioPath]}),Object(k.jsx)("div",{ref:n}),Object(k.jsx)(m.a,{onClick:c,children:"Play Audio"}),Object(k.jsx)(m.a,{onClick:function(){var e;null===(e=o.current)||void 0===e||e.pause()},children:"Pause Audio"})]})},R=n(79);function E(){return(E=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Open Microphone"),e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-70,a=new AudioContext,u=a.createAnalyser(),i=a.createMediaStreamSource(e.current);i.connect(u),u.minDecibels=c;var l=new Uint8Array(u.frequencyBinCount),s=performance.now(),d=!1;function j(c){null!=e.current?(requestAnimationFrame(j),u.getByteFrequencyData(l),l.some((function(e){return e}))&&(d&&(t(),d=!1,console.log("Audio Started")),s=c),!d&&c-s>o&&(n(),d=!0,console.log("Audio Stopped"))):r()}j()}var D=function(e){var t=Object(r.useRef)(),n=Object(r.useState)(),o=Object(b.a)(n,2),c=o[0],a=o[1];Object(R.a)("r",(function(e){e.altKey&&d()}));var u=Object(r.useState)([]),i=Object(b.a)(u,2),l=i[0],s=i[1];function d(){c?(!function(e){console.log("Release Microphone",e),e.current.getTracks().forEach((function(e){return e.stop()})),e.current=null}(t),a(!1)):(function(){return E.apply(this,arguments)}().then((function(e){t.current=e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=new MediaRecorder(e.current),r=[],o=50,c=t/o;n.ondataavailable=function(e){r.push(e.data)},n.onstop=function(e){if(r.length<=c)console.log("Skipping Audio conversion as number of chunks",r.length,"<",c);else{console.log("Converting Audio as number of chunks",r.length,">",c);var t=new Blob(r.slice(0,r.length-c),{type:"audio/ogg; codecs=opus"}),n=window.URL.createObjectURL(t);console.log("Generated clip",n),s((function(e){return[n].concat(Object(j.a)(e))}))}r=[]},T(e,(function(e){return n.start(o)}),(function(e){return n.stop()}),(function(e){}),t,-70)}(t)})),a(!0))}var f=Object(r.useState)(!1),y=Object(b.a)(f,2),m=y[0],C=y[1],P=Object(r.useState)(!1),w=Object(b.a)(P,2),D=w[0],F=w[1];return Object(k.jsxs)(h.a,{children:[Object(k.jsx)("h2",{children:"Dictaphone WIP"}),Object(k.jsx)(p.a,{title:"Toggle with Alt-R",arrow:!0,children:Object(k.jsx)(A,{enabled:c,enableText:"Start Recording",disableText:"Stop Recording",onClick:d})}),Object(k.jsx)(v.a,{label:"Custom Audio File Path",placeholder:"Hello hello",onChange:function(e){return s([e.target.value])}}),Object(k.jsxs)(O.a,{children:[Object(k.jsx)(g.a,{control:Object(k.jsx)(x.a,{onChange:function(e){return C(e.target.checked)}}),label:"Loop"}),Object(k.jsx)(g.a,{control:Object(k.jsx)(x.a,{onChange:function(e){return F(e.target.checked)}}),label:"Autoplay"})]}),l.map((function(e){return Object(k.jsx)(S,{audioPath:e,autoplay:D,loop:m},e)}))]})};var F=function(){var e=Object(u.a)({palette:{mode:"dark"},components:{MuiButton:{defaultProps:{variant:"outlined"}}}});return Object(k.jsxs)(i.a,{theme:e,children:[Object(k.jsx)(l.a,{}),Object(k.jsx)(D,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};a.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(F,{})}),document.getElementById("root")),M()}},[[113,1,2]]]);
//# sourceMappingURL=main.bb786d19.chunk.js.map